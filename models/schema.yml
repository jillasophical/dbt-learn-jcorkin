
version: 2

models:
      - name: customers
        description: "Customers with aggregated order information including - first order date, recent order date, total # of orders, and total lifetime value"
      
      - name: stg_customers
        description: "clean version of customer data"

      - name: stg_payments
        description: "clean version of all stripe payments"
        

      - name: stg_orders
        description: "clean version of orders which includes successful payment amounts"
         

        
    # - name: my_first_dbt_model
    #   description: "A starter dbt model"
    #   columns:
    #       - name: id
    #         description: "The primary key for this table"
    #         tests:
    #             - unique
    #             - not_null

    # - name: my_second_dbt_model
    #   description: "A starter dbt model"
    #   columns:
    #       - name: id
    #         description: "The primary key for this table"
    #         tests:
    #             - unique
    #             - not_null

sources:
    - name: jaffle_shop
      description: "The infamous and illustrious jaffle data"
      database: raw
      schema: jaffle_shop

      tables: 
      - name: customers
        description: "Customers by name and id"   
      - name: orders
        description: "This source includes all order data"
        loaded_at_field: etl_loaded_timestamp
    
    - name: stripe
      description: "Stipe payments data"
      loaded_at_field: _batched_at

      tables:
      - name: payment
        loaded_at_field: _batched_at



